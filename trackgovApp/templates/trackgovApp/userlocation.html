{% extends 'trackgovApp/base.html' %}
{% block title %} Get User Location {% endblock title %}
{% block content %}
{% load static %}
    <!-- Begin page -->
    <div class="wrapper">
        <div id="politician_details"></div>
        <script type="application/javascript">
            getLocation();

            function getLocation() {
                if (navigator.geolocation) {
                    navigator.geolocation.getCurrentPosition(ShowPoliticationInformation);
                } else {
                    alert("Geolocation is not supported by this browser.")
                }

                function ShowPoliticationInformation(position) {
                    var xhttp = new XMLHttpRequest();
                    xhttp.onreadystatechange = function () {
                        if (this.readyState == 4 && this.status == 200) {
                            document.getElementById("politician_details").innerHTML = this.responseText;
                        }
                    };
                    xhttp.open("GET", "http://127.0.0.1:8000/politicianbio/?lat=" + position.coords.latitude + "&lng=" + position.coords.longitude, true);
                    xhttp.send();
                }
            }
        </script>
    </div>

{% endblock content %}

